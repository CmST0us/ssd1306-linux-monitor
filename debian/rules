#!/usr/bin/make -f

%:
	dh $@

override_dh_auto_configure:
	mkdir -p build
	cd build && cmake .. -DCMAKE_INSTALL_PREFIX=/usr

override_dh_auto_build:
	cd build && $(MAKE)

override_dh_auto_install:
	cd build && $(MAKE) install DESTDIR=$(CURDIR)/debian/ssd1306-monitor
	install -d $(CURDIR)/debian/ssd1306-monitor/etc/systemd/system
	install -m 644 $(CURDIR)/scripts/ssd1306-monitor.service \
		$(CURDIR)/debian/ssd1306-monitor/etc/systemd/system/ssd1306-monitor.service

override_dh_auto_clean:
	rm -rf build
